<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title><%= excursion.name %> - CodoViajero</title>
  <link rel="stylesheet" href="/css/styles.css">
  <link href="https://fonts.googleapis.com/css?family=Work+Sans:200,400&display=swap" rel="stylesheet">
  <style>
    .work-sans {
      font-family: 'Work Sans', sans-serif;
    }

    #menu-toggle:checked+#menu {
      display: block;
    }

    .hover\:grow {
      transition: all 0.3s;
      transform: scale(1);
    }

    .hover\:grow:hover {
      transform: scale(1.02);
    }

    .carousel-open:checked+.carousel-item {
      position: static;
      opacity: 100;
    }

    .carousel-item {
      -webkit-transition: opacity 0.6s ease-out;
      transition: opacity 0.6s ease-out;
    }

    #carousel-1:checked~.control-1,
    #carousel-2:checked~.control-2,
    #carousel-3:checked~.control-3 {
      display: block;
    }

    .carousel-indicators {
      list-style: none;
      margin: 0;
      padding: 0;
      position: absolute;
      bottom: 2%;
      left: 0;
      right: 0;
      text-align: center;
      z-index: 10;
    }

    #carousel-1:checked~.control-1~.carousel-indicators li:nth-child(1) .carousel-bullet,
    #carousel-2:checked~.control-2~.carousel-indicators li:nth-child(2) .carousel-bullet,
    #carousel-3:checked~.control-3~.carousel-indicators li:nth-child(3) .carousel-bullet {
      color: #000;
    }
  </style>
</head>

<body class="flex-col items-center">
  <header>
    <%- include ('./layouts/partials/nav') %>
  </header>

  <main>
    <div class="flex flex-col mx-auto max-w-screen-xl gap-10 p-10">
      <% if (!hasDetails) { %>
      <div class="p-4 mb-4 text-sm text-yellow-800 rounded-lg bg-yellow-50 border border-yellow-300" role="alert">
        <span class="font-medium">Atención:</span> No se encontraron detalles para esta excursión. Algunos datos pueden no estar disponibles.
      </div>
      <% } %>

      <!-- Header con nombre, destino y precio -->
      <div class="flex flex-col md:flex-row justify-between gap-6">
        <div class="flex-1">
          <% if (excursion.destination) { %>
          <span class="inline-block px-3 py-1 text-sm font-medium text-orange-600 bg-orange-100 rounded-full mb-2">
            <%= excursion.destination %>
          </span>
          <% } %>
          <h2 class="text-2xl font-semibold text-gray-900 sm:text-3xl">
            <%= excursion.name %>
          </h2>
          <p class="mt-4 text-gray-700">
            <%= excursion.description %>
          </p>
        </div>

        <div class="flex items-center justify-center">
          <% if (excursion.price) { %>
          <p>
            <strong class="text-6xl font-bold text-orange-600">$<%= excursion.price %></strong>
          </p>
          <% } else { %>
          <p class="text-2xl text-gray-400">Precio no disponible</p>
          <% } %>
        </div>
      </div>

      <!-- Carrusel de imágenes -->
      <% if (images && images.length > 0) { %>
      <div id="excursion-carousel" class="relative w-full" data-carousel="slide">
        <div class="relative h-64 overflow-hidden rounded-lg md:h-96">
          <% images.forEach((image, index) => { %>
            <div class="hidden duration-700 ease-in-out" data-carousel-item="<%= index === 0 ? 'active' : '' %>">
              <img src="/img/excursions/<%= image.img %>"
                class="absolute block w-full h-full object-cover -translate-x-1/2 -translate-y-1/2 top-1/2 left-1/2"
                alt="<%= excursion.name %> - Imagen <%= index + 1 %>">
            </div>
          <% }); %>
        </div>

        <button type="button"
          class="absolute top-0 left-0 z-30 flex items-center justify-center h-full px-4 cursor-pointer group focus:outline-none"
          data-carousel-prev>
          <span class="inline-flex items-center justify-center w-10 h-10 rounded-full bg-white/30">
            <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"
              xmlns="http://www.w3.org/2000/svg">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
            </svg>
          </span>
        </button>
        <button type="button"
          class="absolute top-0 right-0 z-30 flex items-center justify-center h-full px-4 cursor-pointer group focus:outline-none"
          data-carousel-next>
          <span class="inline-flex items-center justify-center w-10 h-10 rounded-full bg-white/30">
            <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"
              xmlns="http://www.w3.org/2000/svg">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
            </svg>
          </span>
        </button>
      </div>
      <% } %>

      <!-- Detalles de la excursión -->
      <div class="flow-root">
        <dl class="-my-3 divide-y divide-gray-100 text-sm">
          <div class="grid grid-cols-1 gap-1 py-3 sm:grid-cols-3 sm:gap-4">
            <dt class="font-medium text-gray-900">Precio</dt>
            <dd class="text-gray-700 sm:col-span-2">
              <%= excursion.price ? '$' + excursion.price : 'No disponible' %>
            </dd>
          </div>

          <div class="grid grid-cols-1 gap-1 py-3 sm:grid-cols-3 sm:gap-4">
            <dt class="font-medium text-gray-900">Duración</dt>
            <dd class="text-gray-700 sm:col-span-2">
              <%= excursion.duration ? excursion.duration + ' horas' : 'No disponible' %>
            </dd>
          </div>

          <div class="grid grid-cols-1 gap-1 py-3 sm:grid-cols-3 sm:gap-4">
            <dt class="font-medium text-gray-900">Descripción</dt>
            <dd class="text-gray-700 sm:col-span-2">
              <%= excursion.description %>
            </dd>
          </div>

          <% if (excursion.destination) { %>
          <div class="grid grid-cols-1 gap-1 py-3 sm:grid-cols-3 sm:gap-4">
            <dt class="font-medium text-gray-900">Destino</dt>
            <dd class="text-gray-700 sm:col-span-2">
              <%= excursion.destination %>
            </dd>
          </div>
          <% } %>
        </dl>
      </div>

      <!-- Disponibilidad -->
      <% if (availability && availability.length > 0) { %>
      <div class="mt-6">
        <h3 class="text-xl font-semibold text-gray-900 mb-4">Disponibilidad</h3>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
          <% availability.forEach(function(slot) { %>
          <div class="p-4 border border-gray-200 rounded-lg bg-gray-50">
            <% if (slot.date) { %>
            <p class="text-sm text-gray-600">
              <span class="font-medium">Fecha:</span>
              <%= new Date(slot.date).toLocaleDateString('es-AR') %>
            </p>
            <% } %>
            <p class="text-sm text-gray-600">
              <span class="font-medium">Hora de inicio:</span>
              <%= slot.start_time %>
            </p>
            <p class="text-sm text-gray-600">
              <span class="font-medium">Duración:</span>
              <%= slot.duration %> horas
            </p>
          </div>
          <% }); %>
        </div>
      </div>
      <% } %>
    </div>
  </main>

</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/flowbite/1.6.3/flowbite.min.js"></script>

<footer class="h-60 w-full">
  <%- include ('./layouts/partials/footer') %>
</footer>

</html>
